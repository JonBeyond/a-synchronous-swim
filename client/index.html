<html>
<head>
  <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>
  <h1>A Synchronous Swim</h1>
  <div class="pool">
    <div class="team">
      <div class="swimmer">↜</div>
      <div class="swimmer">↜</div>
      <div class="swimmer">↜</div>
      <div class="swimmer">↜</div>
    </div>
  </div>
  <div class="cmdSelect"> Send a specific command to the swimteam:
    <br>
    <select id="cmdOptions">
      <option value="up">up</option>
      <option value="down">down</option>
      <option value="left">left</option>
      <option value="right">right</option>
    </select>
    <button id='cmdSubmit'>submit</button>
    <br>
    <br>
  </div>
  <div> Send a random command via ajax
    <br>
    <button id="ajaxRand">Submit request</button>
  </div>
</body>
<script src="/node_modules/jquery/dist/jquery.js"></script>
<script src="/node_modules/underscore/underscore.js"></script>
<script src="/js/swimTeam.js"></script>
<script src="/js/keypressHandler.js"></script>
<script>

  $(document).ready(function(){
    //event listener for submit button goes here
    $('#cmdSubmit').click(function(){
      //need to remove the value selected
      var command = $("#cmdOptions option:selected" ).text();
      //now this needs to send to the swimTeam command
      SwimTeam.move(command);
    })

    $('#ajaxRand').click(function(){
      //send a request to the server and have the server respond with a random request,
      //which is then performed
      var successCB = (data) => {
        console.log(data);
        console.log(data.length);

        if (data === null) {
          console.log("No commands present on server")
        } else {
          for (let i = 0; i < data.length; i++){
            console.log("CMD RCVD: "+data[i]);
            SwimTeam.move(data[i]);
            //synchronous wait command:
          }
        }
      }

      $.ajax({
        url: 'http://127.0.0.1:3000',
        type: "GET",
        contentType: 'application/json',
        success: successCB,
        error: (error) => {console.log(`error: ${error}`)}
      })

    })

  });

</script>
</html>

